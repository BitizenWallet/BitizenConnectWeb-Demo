import{m as u,b as N,n as g,_ as P}from"./index-ad523796.js";const n=u({selectedChain:void 0,chains:void 0,standaloneChains:void 0,standaloneUri:void 0,address:void 0,profileName:void 0,profileAvatar:void 0,profileLoading:!1,balanceLoading:!1,balance:void 0,isConnected:!1,isStandalone:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1,walletConnectVersion:1}),s={state:n,subscribe(e){return g(n,()=>e(n))},setChains(e){n.chains=e},setStandaloneChains(e){n.standaloneChains=e},setStandaloneUri(e){n.standaloneUri=e},getSelectedChain(){const e=I.client().getNetwork().chain;return e&&(n.selectedChain=e),n.selectedChain},setSelectedChain(e){n.selectedChain=e},setIsStandalone(e){n.isStandalone=e},setIsCustomDesktop(e){n.isCustomDesktop=e},setIsCustomMobile(e){n.isCustomMobile=e},getAccount(){const e=I.client().getAccount();n.address=e.address,n.isConnected=e.isConnected},setAddress(e){n.address=e},setIsConnected(e){n.isConnected=e},setProfileName(e){n.profileName=e},setProfileAvatar(e){n.profileAvatar=e},setProfileLoading(e){n.profileLoading=e},setBalanceLoading(e){n.balanceLoading=e},setBalance(e){n.balance=e},setIsDataLoaded(e){n.isDataLoaded=e},setIsUiLoaded(e){n.isUiLoaded=e},setWalletConnectVersion(e){n.walletConnectVersion=e},resetEnsProfile(){n.profileName=void 0,n.profileAvatar=void 0},resetBalance(){n.balance=void 0},resetAccount(){n.address=void 0,n.isConnected=!1,s.resetEnsProfile(),s.resetBalance()}},C=u({initialized:!1,ethereumClient:void 0}),I={setEthereumClient(e){!C.initialized&&e&&(C.ethereumClient=e,s.setChains(e.chains),C.initialized=!0)},client(){if(C.ethereumClient)return C.ethereumClient;throw new Error("ClientCtrl has no client set")}},d={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",isMobile(){return typeof window<"u"?Boolean(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return d.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isEmptyObject(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.getOwnPropertyNames(e).length===0&&Object.getOwnPropertySymbols(e).length===0},isHttpUrl(e){return e.startsWith("http://")||e.startsWith("https://")},formatNativeUrl(e,t,a){if(d.isHttpUrl(e))return this.formatUniversalUrl(e,t,a);let o=e;o.includes("://")||(o=e.replaceAll("/","").replaceAll(":",""),o=`${o}://`),this.setWalletConnectDeepLink(o,a);const l=encodeURIComponent(t);return`${o}wc?uri=${l}`},formatUniversalUrl(e,t,a){if(!d.isHttpUrl(e))return this.formatNativeUrl(e,t,a);let o=e;e.endsWith("/")&&(o=e.slice(0,-1)),this.setWalletConnectDeepLink(o,a);const l=encodeURIComponent(t);return`${o}/wc?uri=${l}`},async wait(e){return new Promise(t=>{setTimeout(t,e)})},openHref(e,t="_self"){window.open(e,t,"noreferrer noopener")},setWalletConnectDeepLink(e,t){localStorage.setItem(d.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))},setWalletConnectAndroidDeepLink(e){const[t]=e.split("?");localStorage.setItem(d.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:"Android"}))},removeWalletConnectDeepLink(){localStorage.removeItem(d.WALLETCONNECT_DEEPLINK_CHOICE)},isNull(e){return e===null}};function U(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const m=u({projectId:"",themeMode:U()?"dark":"light",themeColor:"default",themeBackground:d.isMobile()?"themeColor":"gradient",themeZIndex:89,mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chainImages:void 0,tokenImages:void 0,standaloneChains:void 0,enableStandaloneMode:!1,enableNetworkView:!1,enableAccountView:!0,defaultChain:void 0,explorerAllowList:void 0,explorerDenyList:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),L={state:m,subscribe(e){return g(m,()=>e(m))},setConfig(e){var t,a,o,l;if(s.setStandaloneChains(e.standaloneChains),s.setIsStandalone(Boolean((t=e.standaloneChains)==null?void 0:t.length)||Boolean(e.enableStandaloneMode)),s.setIsCustomMobile(Boolean((a=e.mobileWallets)==null?void 0:a.length)),s.setIsCustomDesktop(Boolean((o=e.desktopWallets)==null?void 0:o.length)),s.setWalletConnectVersion((l=e.walletConnectVersion)!=null?l:1),e.defaultChain)s.setSelectedChain(e.defaultChain);else if(!s.state.isStandalone){const p=I.client().getDefaultChain();s.setSelectedChain(p)}Object.assign(m,e)},setThemeConfig(e){Object.assign(m,e)}},O="https://explorer-api.walletconnect.com";function A(e){const t=Object.fromEntries(Object.entries(e).filter(([a,o])=>typeof o<"u"&&o!==null&&o!=="").map(([a,o])=>[a,o.toString()]));return new URLSearchParams(t).toString()}const b={async fetchWallets(e,t){const a=A(t),o=`${O}/v3/wallets?projectId=${e}&${a}`;return(await fetch(o)).json()},formatImageUrl(e,t){return`${O}/v3/logo/lg/${t}?projectId=${e}`}},r=u({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},previewWallets:[],recomendedWallets:[]});function v(){const{projectId:e}=L.state;if(!e)throw new Error("projectId is required to work with explorer api");return e}const $={state:r,async getPreviewWallets(e){const{listings:t}=await b.fetchWallets(v(),e);return r.previewWallets=Object.values(t),r.previewWallets},async getRecomendedWallets(){const{listings:e}=await b.fetchWallets(v(),{page:1,entries:6});r.recomendedWallets=Object.values(e)},async getPaginatedWallets(e){const{page:t,search:a}=e,{listings:o,total:l}=await b.fetchWallets(v(),e),p=Object.values(o),w=a?"search":"wallets";return r[w]={listings:[...r[w].listings,...p],total:l,page:t??1},{listings:p,total:l}},getImageUrl(e){return b.formatImageUrl(v(),e)},resetSearch(){r.search={listings:[],total:0,page:1}}},i=u({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),f={state:i,subscribe(e){return g(i,()=>e(i))},push(e,t){e!==i.view&&(i.view=e,t&&(i.data=t),i.history.push(e))},replace(e){i.view=e,i.history=[e]},goBack(){if(i.history.length>1){i.history.pop();const[e]=i.history.slice(-1);i.view=e}}},h=u({open:!1}),y={state:h,subscribe(e){return g(h,()=>e(h))},async open(e){return new Promise(t=>{const{isConnected:a,isStandalone:o,isUiLoaded:l,isDataLoaded:p}=s.state,{enableNetworkView:w}=L.state;if(o?(s.setStandaloneUri(e==null?void 0:e.uri),s.setStandaloneChains(e==null?void 0:e.standaloneChains),f.replace("ConnectWallet")):e!=null&&e.route?f.replace(e.route):a?f.replace("Account"):w?f.replace("SelectNetwork"):f.replace("ConnectWallet"),l&&p)h.open=!0,t();else{const S=setInterval(()=>{s.state.isUiLoaded&&s.state.isDataLoaded&&(clearInterval(S),h.open=!0,t())},200)}})},close(){h.open=!1}},c=u({open:!1,message:"",variant:"success"}),B={state:c,subscribe(e){return g(c,()=>e(c))},openToast(e,t){c.open=!0,c.message=e,c.variant=t},closeToast(){c.open=!1}};typeof window<"u"&&(window.Buffer||(window.Buffer=N.Buffer),window.global||(window.global=window),window.process||(window.process={env:{}}));var j=Object.defineProperty,E=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,W=(e,t,a)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,D=(e,t)=>{for(var a in t||(t={}))k.call(t,a)&&W(e,a,t[a]);if(E)for(var a of E(t))_.call(t,a)&&W(e,a,t[a]);return e};class M{constructor(t){this.openModal=y.open,this.closeModal=y.close,this.subscribeModal=y.subscribe,this.setTheme=L.setThemeConfig,L.setConfig(D({enableStandaloneMode:!0},t)),this.initUi()}async initUi(){if(typeof window<"u"){await P(()=>import("./index-ae3bae7a.js"),["assets/index-ae3bae7a.js","assets/browser-f96af578.js","assets/dijkstra-59d11638.js","assets/index-ad523796.js"]);const t=document.createElement("w3m-modal");document.body.insertAdjacentElement("beforeend",t),s.setIsUiLoaded(!0)}}}const H=Object.freeze(Object.defineProperty({__proto__:null,Web3Modal:M},Symbol.toStringTag,{value:"Module"}));export{$ as A,I as L,B as P,L as W,s as a,d,f as g,H as i,y as k};
